åœ¨ Anaconda ä¸­ï¼Œå°æ‡‰åˆ° Poetry `pyproject.toml` çš„æ¨™æº–ä½œæ³•æ˜¯ç”¢ç”Ÿä¸€å€‹ **`environment.yml`** æª”æ¡ˆã€‚

é€™å€‹æª”æ¡ˆæœƒç´€éŒ„ä½ ç’°å¢ƒä¸­æ‰€æœ‰çš„å¥—ä»¶ç‰ˆæœ¬ï¼Œè®“ä½ æ¨ä¸Š Git å¾Œï¼Œåœ¨åˆ¥å°é›»è…¦ï¼ˆæˆ–é‡æ–°å®‰è£ç³»çµ±å¾Œï¼‰èƒ½ä¸€éµé‚„åŸã€‚

é€™è£¡æœ‰å…©ç¨®å°å‡ºæ–¹å¼ï¼Œé‡å°ä½ çš„éœ€æ±‚ï¼ˆæ”¾é€² Gitï¼‰ï¼Œæˆ‘å¼·çƒˆå»ºè­°ä½¿ç”¨ **æ–¹æ³•äºŒ**ã€‚

### æ–¹æ³•ä¸€ï¼šå®Œæ•´å°å‡º (åŒ…å«æ‰€æœ‰ä¾è³´ç´°ç¯€)

é€™æ˜¯æœ€æš´åŠ›çš„æ–¹å¼ï¼Œå®ƒæœƒæŠŠæ‰€æœ‰å¥—ä»¶ï¼ˆåŒ…æ‹¬ä¾è³´çš„ä¾è³´ï¼‰çš„ç²¾ç¢ºç‰ˆæœ¬èˆ‡ Build String å…¨éƒ¨è¨˜ä¸‹ä¾†ã€‚

ç¼ºé»ï¼š è·¨å¹³å°ç›¸å®¹æ€§å·®ã€‚å¦‚æœä½ åœ¨ Linux å°å‡ºï¼Œæ‹¿åˆ° Windows æˆ– Mac é€šå¸¸æœƒå®‰è£å¤±æ•—ï¼ˆå› ç‚ºåº•å±¤ Build String ä¸åŒï¼‰ã€‚



```Bash
conda env export > environment.yml
```

---

### æ–¹æ³•äºŒï¼šç²¾ç°¡å°å‡º (æ¨è–¦çµ¦ Git ä½¿ç”¨)

åŠ ä¸Š `--from-history` åƒæ•¸ã€‚é€™åªæœƒåˆ—å‡º**ä½ æ‰‹å‹•ä¸‹æŒ‡ä»¤å®‰è£**çš„é‚£äº›é ‚å±¤å¥—ä»¶ï¼Œè®“ Conda åœ¨æ–°ç’°å¢ƒé‡æ–°è§£æä¾è³´é—œä¿‚ã€‚é€™æœ€åƒ Poetry çš„ `pyproject.toml` é‚è¼¯ã€‚

**å„ªé»ï¼š** è·¨å¹³å°ç›¸å®¹æ€§å¥½ï¼Œæª”æ¡ˆä¹¾æ·¨ï¼Œé©åˆæ”¾é€² Gitã€‚



```Bash
conda env export --from-history > environment.yml
```

ç”¢å‡ºçš„ `environment.yml` æœƒé•·é€™æ¨£ï¼š



```YAML
name: my_quant_env
channels:
  - defaults
dependencies:
  - python=3.10
  - pandas
  - tensorflow
  - scikit-learn
  - pip:
    - some-pip-package
```

---

### å¦‚ä½•åœ¨æ–°ç’°å¢ƒé‚„åŸ (Restore)

ç•¶ä½ åœ¨æ–°é›»è…¦ clone ä¸‹ä½ çš„ Git repo å¾Œï¼Œåªè¦åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼ŒConda å°±æœƒä¾ç…§ `environment.yml` è‡ªå‹•å»ºç«‹ç’°å¢ƒä¸¦å®‰è£æ‰€æœ‰ libsï¼š

**1. å»ºç«‹å…¨æ–°ç’°å¢ƒï¼š**



```Bash
conda env create -f environment.yml
```

2. æˆ–æ˜¯æ›´æ–°ç¾æœ‰ç’°å¢ƒï¼š

å¦‚æœä½ å·²ç¶“åœ¨ç’°å¢ƒè£¡ï¼Œåªæ˜¯æƒ³åŒæ­¥æ–°çš„ yml è¨­å®šï¼š



```Bash
conda env update -f environment.yml --prune
```

### ğŸ’¡ é‡è¦å°æé†’ (Pro Tip)

ç•¶ä½ ä½¿ç”¨ `conda env export` æ™‚ï¼Œæœ€å¾Œä¸€è¡Œé€šå¸¸æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹ `prefix: /home/user/anaconda3/envs/xxx`ã€‚

å»ºè­°åœ¨ commit é€² Git ä¹‹å‰ï¼Œæ‰‹å‹•åˆªé™¤é€™è¡Œ prefixã€‚

å› ç‚ºåˆ¥å°é›»è…¦çš„è·¯å¾‘ä¸€å®šè·Ÿä½ çš„ä¸ä¸€æ¨£ï¼Œç•™è‘—é‚£ä¸€è¡Œæœ‰æ™‚å€™æœƒå°è‡´ Conda å ±éŒ¯æˆ–æ··æ·†ã€‚